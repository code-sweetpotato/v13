<!DOCTYPE html>
<html lang="en">
<!--引入thymeleaf-->
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <base href="/" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/shopping-mall-index.css" />
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/zhonglin.js"></script>

</head>

<body>

	<!--top 开始-->
    <div class="top">
    	<div class="top-con w1200">
        	<p class="t-con-l f-l">您好，欢迎来到宅客微购</p>
            <ul class="t-con-r f-r">
            	<li><a href="#">我 (个人中心)</a></li>
            	<li><a href="#">我的购物车</a></li>
            	<li><a href="#">我的订单</a></li>
            	<li class="erweima">
                	<a href="#">扫描二维码</a>
                    <div class="ewm-tu">
                    	<a href="#"><img src="images/erweima-tu.jpg" /></a>
                    </div>
                </li>
                <div style="clear:both;"></div>
            </ul>
            <div style="clear:both;"></div>
        </div>
    </div>
    
    <!--logo search 开始-->
    <div class="hd-info1 w1200">
    	<div class="logo f-l">
        	<h1><a href="#" title="中林网站"><img src="images/logo.jpg" /></a></h1>
        </div>
        <div class="search f-r">
        	<ul class="sp">
            	<li class="current" ss-search="sp"><a href="JavaScript:;">商品</a></li>
                <li ss-search="dp"><a href="JavaScript:;">店铺</a></li>
                <div style="clear:both;"></div>
            </ul>
            <div class="srh">
            	<div class="ipt f-l">
                	<input type="text" placeholder="搜索商品..." ss-search-show="sp" />
                    <input type="text" placeholder="搜索店铺..." ss-search-show="dp" style="display:none;" />
                </div>
                <button class="f-r">搜 索</button>
                <div style="clear:both;"></div>
            </div>
            <ul class="sp2">
                <li><a href="#">绿豆</a></li>
                <li><a href="#">大米</a></li>
                <li><a href="#">驱蚊</a></li>
                <li><a href="#">洗面奶</a></li>
                <li><a href="#">格力空调</a></li>
                <li><a href="#">洗发护发</a></li>
                <li><a href="#">葡萄 </a></li>
                <li><a href="#">脉动</a></li>
                <li><a href="#">海鲜水产</a></li>
                <div style="clear:both;"></div>
            </ul>
        </div>
        <div style="clear:both;"></div>
    </div>
    
    <!--内容开始-->


        <div class="password-con registered">
            <div class="psw">
                <p class="psw-p1">用户名</p>
                <input type="text" placeholder="请输入用户名" id="username" />
                <span class="#" >用户名长度不能超过12</span>
            </div>
            <div class="psw">
                <p class="psw-p1">输入密码</p>
                <input type="password" placeholder="请输入密码" id="password" />
                <span class="#">密码长度不大于八位</span>
            </div>
            <div class="psw">
                <p class="psw-p1">确认密码</p>
                <input type="password" placeholder="请再次确认密码" id="passwordtwo"/>
                <span class="#">密码长度不大于八位</span>
            </div>
            <div class="psw psw2">
                <p class="psw-p1">手机号/邮箱</p>
                <input type="text" placeholder="请输入手机/邮箱验证码" id="codeType" />
                <button id="get-code">获取短信验证码</button><span><span/>

            </div>
            <div class="psw psw3">
                <p class="psw-p1">验证码</p>
                <input type="hidden" id="code" value="#"/>
                <input type="text" placeholder="请输入手机/邮箱验证码" id="volicateCode" /><span><span/>
            </div>
            <div class="psw psw3">
                <p class="psw-p1">验证码</p>
                <input type="text" placeholder="请输入验证码" />
            </div>
            <div class="yanzhentu">
                <div class="yz-tu f-l">
                    <img src="images/psw-yanzhengtu.gif" />
                </div>
                <p class="f-l">看不清？<a href="#">换张图</a></p>
                <div style="clear:both;"></div>
            </div>
            <div class="agreement">
                <input type="checkbox" name="hobby"></input>
                <p>我有阅读并同意<span>《宅客微购网站服务协议》</span></p>
            </div>
            <button class="psw-btn" id="register">立即注册</button>
            <p class="sign-in">已有账号？请<a href="#">登录</a></p>
        </div>

    
    <!--底部服务-->
    <div class="ft-service">
    	<div class="w1200">
        	<div class="sv-con-l2 f-l">
            	<dl>
                	<dt><a href="#">新手上路</a></dt>
                    <dd>
                    	<a href="#">购物流程</a>
                    	<a href="#">在线支付</a>
                    </dd>
                </dl>
                <dl>
                	<dt><a href="#">配送方式</a></dt>
                    <dd>
                    	<a href="#">货到付款区域</a>
                    	<a href="#">配送费标准</a>
                    </dd>
                </dl>
                <dl>
                	<dt><a href="#">购物指南</a></dt>
                    <dd>
                    	<a href="#">常见问题</a>
                    	<a href="#">订购流程</a>
                    </dd>
                </dl>
                <dl>
                	<dt><a href="#">售后服务</a></dt>
                    <dd>
                    	<a href="#">售后服务保障</a>
                    	<a href="#">退款说明</a>
                    	<a href="#">新手选购商品总则</a>
                    </dd>
                </dl>
                <dl>
                	<dt><a href="#">关于我们</a></dt>
                    <dd>
                    	<a href="#">投诉与建议</a>
                    </dd>
                </dl>
                <div style="clear:both;"></div>
            </div>
        	<div class="sv-con-r2 f-r">
            	<p class="sv-r-tle">187-8660-5539</p>
            	<p>周一至周五9:00-17:30</p>
            	<p>（仅收市话费）</p>
            	<a href="#" class="zxkf">24小时在线客服</a>
            </div>
            <div style="clear:both;"></div>
        </div>
    </div>
    <form id="registerInfo" method="post" action="user/toregister">
        <input name="username" id="toregister-username"/>
        <input name="password" id="toregister-password"/>
        <input name="email" id="toregister-email"/>

    </form>
    
    <!--底部 版权-->
    <div class="footer w1200">
    	<p>
        	<a href="#">关于我们</a><span>|</span>
        	<a href="#">友情链接</a><span>|</span>
        	<a href="#">宅客微购社区</a><span>|</span>
        	<a href="#">诚征英才</a><span>|</span>
        	<a href="#">商家登录</a><span>|</span>
        	<a href="#">供应商登录</a><span>|</span>
        	<a href="#">热门搜索</a><span>|</span>
        	<a href="#">宅客微购新品</a><span>|</span>
        	<a href="#">开放平台</a>
        </p>
        <p>
        	沪ICP备13044278号<span>|</span>合字B1.B2-20130004<span>|</span>营业执照<span>|</span>互联网药品信息服务资格证<span>|</span>互联网药品交易服务资格证
        </p>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <script type="text/javascript">
        $("#username").change(function () {
            var username = $("#username").val();

            $.ajax({
                url :"user/existUser",
                data : "username="+username,
                type:"POST",
                success: function (data) {
                    if(data.statusCode == 200){

                        $("#username+span").text(data.data);
                        $("#username+span").attr("class","dui");
                    }else {

                        $("#username+span").text(data.data);
                        $("#username+span").attr("class","cuo");

                    }
                }
            })
        })
        $("#password").change(function () {
            var password = $.trim($("#password").val());
            if(password == ""){
                $("#password+span").text("密码不能为空");
                $("#password+span").attr("class","cuo");
                return;
            }else if(password.length >8){
                $("#password+span").text("密码长度应小于八");
                $("#password+span").attr("class","cuo");
                return;
            }else{
                $("#password+span").text("密码格式正确");
                $("#password+span").attr("class","dui");
            }
        })
        $("#passwordtwo").change(function () {
            var password = $("#password").val();
            var passwordtwo = $("#passwordtwo").val();
            if(passwordtwo != password){
                $("#passwordtwo+span").text("两次密码不一致");
                $("#passwordtwo+span").attr("class","cuo");
            }else{
                $("#passwordtwo+span").text("密码格式正确");
                $("#passwordtwo+span").attr("class","dui");
            }
        })
        $("#get-code").click(function () {
            var codeType = $("#codeType").val();

            $.ajax({
                url :"user/isExistEmail",
                data:"codeType="+codeType,
                type:"POST",
                success: function (data) {
                    if(data.statusCode == 200){
                        $.ajax({
                            url:"user/getCode",
                            data:"sendType="+codeType,
                            type:"POST",
                            success:function (result) {

                                $("#get-code+span").text("验证码已发送至邮箱");
                                $("#get-code+span").attr("class","dui");
                                $("#code").val(result.data);


                            }
                        })
                    }else{

                        $("#get-code+span").text(data.data);
                        $("#get-code+span").attr("class","cuo");
                    }
                }
            })
        })
        $("#register").click(function () {
            var volicateCode = $("#volicateCode").val();

            var code = $("#code").val();

            if(volicateCode == code){
                var username = $("#username").val();
                var password = $("#password").val();
                var email = $("#codeType").val();
                $("#toregister-email").val(email);
                $("#toregister-password").val(password);
                $("#toregister-username").val(username);

                $("#registerInfo").submit();

            }else{
                $("#volicateCode+span").text("验证码错误!请重新输入");
                $("#volicateCode+span").attr("class","cuo");
            }

        })

    </script>
</body>
</html>
